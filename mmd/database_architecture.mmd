graph TB
    %% 6016-app å¾®æœåŠ¡æ•°æ®åº“æ¶æ„å›¾
    
    subgraph "å¾®æœåŠ¡å±‚ - ç¬¬4ç« "
        PDF_SVC["PDFå¤„ç†æœåŠ¡<br/>pdf-service:8001<br/>ğŸ“– 4.3.2(1)"]
        SEMANTIC_SVC["è¯­ä¹‰äº’æ“ä½œæœåŠ¡<br/>semantic-service:8002<br/>ğŸ“– 4.3.2(2)"]
        CDM_SVC["CDMå››å±‚æ³•æœåŠ¡<br/>cdm-service:8003<br/>ğŸ“– 4.3.2(3)"]
        IMPORT_SVC["ç»Ÿä¸€å¯¼å…¥æœåŠ¡<br/>import-service:8004<br/>ğŸ“– 4.3.2(4)"]
        USER_SVC["ç”¨æˆ·ç®¡ç†æœåŠ¡<br/>user-service:8005<br/>ğŸ“– 4.3.2(5)"]
        CONFIG_SVC["é…ç½®ç®¡ç†æœåŠ¡<br/>config-service:8006<br/>ğŸ“– 4.3.2(5)"]
        MONITOR_SVC["ç›‘æ§å‘Šè­¦æœåŠ¡<br/>monitor-service:8007<br/>ğŸ“– 5.3.2"]
        STORAGE_SVC["æ–‡ä»¶å­˜å‚¨æœåŠ¡<br/>storage-service:8008<br/>ğŸ“– 5.1.3"]
    end
    
    subgraph "æ•°æ®åº“å®ä¾‹å±‚ - ç¬¬4ç« "
        PDF_DB[("PDFæœåŠ¡æ•°æ®åº“<br/>pdf_service<br/>ç«¯å£: 3306<br/>ğŸ“– 4.2.4")]
        SEMANTIC_DB[("è¯­ä¹‰æœåŠ¡æ•°æ®åº“<br/>semantic_service<br/>ç«¯å£: 3307<br/>ğŸ“– 4.2.4")]
        CDM_DB[("CDMæœåŠ¡æ•°æ®åº“<br/>cdm_service<br/>ç«¯å£: 3308<br/>ğŸ“– 4.2.3")]
        IMPORT_DB[("å¯¼å…¥æœåŠ¡æ•°æ®åº“<br/>import_service<br/>ç«¯å£: 3309<br/>ğŸ“– 4.2.4")]
        USER_DB[("ç”¨æˆ·æœåŠ¡æ•°æ®åº“<br/>user_service<br/>ç«¯å£: 3310<br/>ğŸ“– 4.3.2(5)")]
        CONFIG_DB[("é…ç½®æœåŠ¡æ•°æ®åº“<br/>config_service<br/>ç«¯å£: 3311<br/>ğŸ“– 4.3.2(5)")]
        MONITOR_DB[("ç›‘æ§æœåŠ¡æ•°æ®åº“<br/>monitor_service<br/>ç«¯å£: 3312<br/>ğŸ“– 5.3.2")]
    end
    
    subgraph "æ•°æ®è¡¨ç»“æ„ - ç¬¬4ç« "
        PDF_TABLES["PDFæœåŠ¡æ•°æ®è¡¨<br/>â€¢ processing_tasks<br/>â€¢ pdf_documents<br/>â€¢ extraction_results<br/>â€¢ validation_reports<br/>ğŸ“– 4.2.2"]
        
        SEMANTIC_TABLES["è¯­ä¹‰æœåŠ¡æ•°æ®è¡¨<br/>â€¢ mapping_rules<br/>â€¢ protocol_definitions<br/>â€¢ conversion_history<br/>â€¢ semantic_annotations<br/>ğŸ“– 4.2.2"]
        
        CDM_TABLES["CDMæœåŠ¡æ•°æ®è¡¨<br/>â€¢ concepts<br/>â€¢ concept_bindings<br/>â€¢ mapping_rules<br/>â€¢ validation_results<br/>ğŸ“– 4.2.2"]
        
        IMPORT_TABLES["å¯¼å…¥æœåŠ¡æ•°æ®è¡¨<br/>â€¢ import_tasks<br/>â€¢ file_metadata<br/>â€¢ processing_logs<br/>â€¢ import_results<br/>ğŸ“– 4.2.2"]
        
        USER_TABLES["ç”¨æˆ·æœåŠ¡æ•°æ®è¡¨<br/>â€¢ users<br/>â€¢ roles<br/>â€¢ permissions<br/>â€¢ user_sessions<br/>ğŸ“– 4.2.2"]
        
        CONFIG_TABLES["é…ç½®æœåŠ¡æ•°æ®è¡¨<br/>â€¢ configurations<br/>â€¢ config_versions<br/>â€¢ environment_settings<br/>â€¢ feature_flags<br/>ğŸ“– 4.2.2"]
        
        MONITOR_TABLES["ç›‘æ§æœåŠ¡æ•°æ®è¡¨<br/>â€¢ metrics<br/>â€¢ alerts<br/>â€¢ performance_logs<br/>â€¢ system_health<br/>ğŸ“– 4.2.2"]
    end
    
    subgraph "ç¼“å­˜å±‚ - ç¬¬4ç« "
        REDIS_CACHE[("Redisç¼“å­˜<br/>å¤šDBå®ä¾‹<br/>ç«¯å£: 6379<br/>ğŸ“– 4.5.1")]
        REDIS_DB0[("DB0: ç½‘å…³ç¼“å­˜<br/>é™æµ/ç†”æ–­<br/>ğŸ“– 4.5.2")]
        REDIS_DB1[("DB1: PDFç¼“å­˜<br/>å¤„ç†ç»“æœ<br/>ğŸ“– 4.5.1")]
        REDIS_DB2[("DB2: è¯­ä¹‰ç¼“å­˜<br/>æ˜ å°„è§„åˆ™<br/>ğŸ“– 4.5.1")]
        REDIS_DB3[("DB3: CDMç¼“å­˜<br/>æ¦‚å¿µæ•°æ®<br/>ğŸ“– 4.5.1")]
        REDIS_DB4[("DB4: å¯¼å…¥ç¼“å­˜<br/>ä»»åŠ¡çŠ¶æ€<br/>ğŸ“– 4.5.1")]
        REDIS_DB5[("DB5: ç”¨æˆ·ç¼“å­˜<br/>ä¼šè¯æ•°æ®<br/>ğŸ“– 4.5.1")]
        REDIS_DB6[("DB6: é…ç½®ç¼“å­˜<br/>é…ç½®ä¿¡æ¯<br/>ğŸ“– 4.5.1")]
        REDIS_DB7[("DB7: ç›‘æ§ç¼“å­˜<br/>æŒ‡æ ‡æ•°æ®<br/>ğŸ“– 4.5.1")]
    end
    
    subgraph "æ•°æ®ä¸€è‡´æ€§ - ç¬¬4ç« "
        EVENT_BUS["äº‹ä»¶æ€»çº¿<br/>RabbitMQ<br/>æ•°æ®åŒæ­¥<br/>ğŸ“– 4.4.2"]
        SAGA_PATTERN["Sagaæ¨¡å¼<br/>åˆ†å¸ƒå¼äº‹åŠ¡<br/>è¡¥å¿æœºåˆ¶<br/>ğŸ“– 4.4.3"]
        CQRS_PATTERN["CQRSæ¨¡å¼<br/>è¯»å†™åˆ†ç¦»<br/>äº‹ä»¶æº¯æº<br/>ğŸ“– 4.5.1"]
    end
    
    %% æœåŠ¡åˆ°æ•°æ®åº“è¿æ¥
    PDF_SVC --> PDF_DB
    SEMANTIC_SVC --> SEMANTIC_DB
    CDM_SVC --> CDM_DB
    IMPORT_SVC --> IMPORT_DB
    USER_SVC --> USER_DB
    CONFIG_SVC --> CONFIG_DB
    MONITOR_SVC --> MONITOR_DB
    
    %% æ•°æ®åº“åˆ°è¡¨ç»“æ„è¿æ¥
    PDF_DB --> PDF_TABLES
    SEMANTIC_DB --> SEMANTIC_TABLES
    CDM_DB --> CDM_TABLES
    IMPORT_DB --> IMPORT_TABLES
    USER_DB --> USER_TABLES
    CONFIG_DB --> CONFIG_TABLES
    MONITOR_DB --> MONITOR_TABLES
    
    %% æœåŠ¡åˆ°ç¼“å­˜è¿æ¥
    PDF_SVC --> REDIS_DB1
    SEMANTIC_SVC --> REDIS_DB2
    CDM_SVC --> REDIS_DB3
    IMPORT_SVC --> REDIS_DB4
    USER_SVC --> REDIS_DB5
    CONFIG_SVC --> REDIS_DB6
    MONITOR_SVC --> REDIS_DB7
    
    %% ç¼“å­˜å®ä¾‹å…³ç³»
    REDIS_CACHE --> REDIS_DB0
    REDIS_CACHE --> REDIS_DB1
    REDIS_CACHE --> REDIS_DB2
    REDIS_CACHE --> REDIS_DB3
    REDIS_CACHE --> REDIS_DB4
    REDIS_CACHE --> REDIS_DB5
    REDIS_CACHE --> REDIS_DB6
    REDIS_CACHE --> REDIS_DB7
    
    %% æ•°æ®ä¸€è‡´æ€§è¿æ¥
    PDF_DB --> EVENT_BUS
    SEMANTIC_DB --> EVENT_BUS
    CDM_DB --> EVENT_BUS
    IMPORT_DB --> EVENT_BUS
    
    EVENT_BUS --> SAGA_PATTERN
    EVENT_BUS --> CQRS_PATTERN
    
    %% æ ·å¼å®šä¹‰
    classDef service fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef database fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef tables fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef cache fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef consistency fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    
    class PDF_SVC,SEMANTIC_SVC,CDM_SVC,IMPORT_SVC,USER_SVC,CONFIG_SVC,MONITOR_SVC,STORAGE_SVC service
    class PDF_DB,SEMANTIC_DB,CDM_DB,IMPORT_DB,USER_DB,CONFIG_DB,MONITOR_DB database
    class PDF_TABLES,SEMANTIC_TABLES,CDM_TABLES,IMPORT_TABLES,USER_TABLES,CONFIG_TABLES,MONITOR_TABLES tables
    class REDIS_CACHE,REDIS_DB0,REDIS_DB1,REDIS_DB2,REDIS_DB3,REDIS_DB4,REDIS_DB5,REDIS_DB6,REDIS_DB7 cache
    class EVENT_BUS,SAGA_PATTERN,CQRS_PATTERN consistency
