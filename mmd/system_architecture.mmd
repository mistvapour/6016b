graph TB
    %% 6016-app 系统总体架构图
    
    subgraph "前端层 (Frontend)"
        UI[用户界面<br/>React + TypeScript]
        PDF_UI[PDF处理界面<br/>PDFProcessor.tsx]
        BATCH_UI[批量处理界面<br/>BatchProcessor.tsx]
        VIEW_UI[数据查看界面<br/>TableView.tsx]
    end
    
    subgraph "API网关层 (FastAPI)"
        MAIN_API[主API<br/>main.py]
        PDF_API[PDF处理API<br/>pdf_api.py]
        MQTT_API[MQTT处理API<br/>mqtt_api.py]
        UNIVERSAL_API[统一导入API<br/>universal_import_api.py]
        YAML_API[YAML导入API<br/>import_yaml.py]
    end
    
    subgraph "业务逻辑层 (Business Logic)"
        PDF_PROC[PDF处理器<br/>pdf_processor.py]
        MQTT_PROC[MQTT处理器<br/>mqtt_processor.py]
        UNIVERSAL_SYS[统一导入系统<br/>universal_import_system.py]
        BATCH_PROC[批量处理器<br/>batch_processor.py]
    end
    
    subgraph "适配器层 (Adapters)"
        PDF_ADAPTER[PDF适配器组<br/>pdf_adapter/]
        MQTT_ADAPTER[MQTT适配器组<br/>mqtt_adapter/]
        XML_CONVERTER[XML转换器<br/>xml_to_pdf_converter.py]
    end
    
    subgraph "数据存储层 (Data Layer)"
        MYSQL[(MySQL数据库<br/>6016数据)]
        FILE_STORAGE[文件存储<br/>PDF/YAML/JSON]
        CACHE[缓存系统<br/>Redis]
    end
    
    %% 连接关系
    UI --> MAIN_API
    PDF_UI --> PDF_API
    BATCH_UI --> UNIVERSAL_API
    VIEW_UI --> MAIN_API
    
    MAIN_API --> PDF_PROC
    PDF_API --> PDF_PROC
    MQTT_API --> MQTT_PROC
    UNIVERSAL_API --> UNIVERSAL_SYS
    YAML_API --> UNIVERSAL_SYS
    
    PDF_PROC --> PDF_ADAPTER
    MQTT_PROC --> MQTT_ADAPTER
    UNIVERSAL_SYS --> XML_CONVERTER
    BATCH_PROC --> PDF_ADAPTER
    
    PDF_ADAPTER --> MYSQL
    MQTT_ADAPTER --> MYSQL
    XML_CONVERTER --> MYSQL
    
    PDF_ADAPTER --> FILE_STORAGE
    MQTT_ADAPTER --> FILE_STORAGE
    XML_CONVERTER --> FILE_STORAGE
    
    UNIVERSAL_SYS --> CACHE
    
    %% 样式
    classDef frontend fill:#e1f5fe
    classDef api fill:#f3e5f5
    classDef business fill:#e8f5e8
    classDef adapter fill:#fff3e0
    classDef storage fill:#fce4ec
    
    class UI,PDF_UI,BATCH_UI,VIEW_UI frontend
    class MAIN_API,PDF_API,MQTT_API,UNIVERSAL_API,YAML_API api
    class PDF_PROC,MQTT_PROC,UNIVERSAL_SYS,BATCH_PROC business
    class PDF_ADAPTER,MQTT_ADAPTER,XML_CONVERTER adapter
    class MYSQL,FILE_STORAGE,CACHE storage
